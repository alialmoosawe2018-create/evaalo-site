# ๐ ููุฎุต ุฑูุงุจุท Webhook ูู ุงูุชุทุจูู

## ๐ข ุงูุนุฏุฏ ุงูุฅุฌูุงูู: **3 Webhooks**

---

## 1๏ธโฃ n8n Webhook (ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู n8n)

### ุงูููุน: **Outgoing Webhook** (ุฅุฑุณุงู)
### ุงูุญุงูุฉ: โ **ููุนู**

### ุงูุฑุงุจุท:
```
https://n8ninstance.amtus.org/webhook/2eabd499-cbaa-4dc9-90c0-59d9e4565d52
```

### ุงููููุน ูู ุงูููุฏ:
- **ููู ุงูุฅุนุฏุงุฏุงุช**: `apps/backend/.env`
- **ูุชุบูุฑ ุงูุจูุฆุฉ**: `N8N_WEBHOOK_URL`
- **ุงูุฎุฏูุฉ**: `apps/backend/src/services/n8nService.ts`

### ุงููุธููุฉ:
- ุฅุฑุณุงู ุจูุงูุงุช ุงููุฑุดุญูู ุฅูู n8n ููุชุญููู
- ูุชู ุงูุฅุฑุณุงู ุชููุงุฆูุงู ุจุนุฏ ุญูุธ ุงูุจูุงูุงุช ูู MongoDB
- Event: `candidate_submitted`
- Event: `candidate_status_updated`

### ูุชู ูุชู ุงุณุชุฎุฏุงูู:
- โ ุนูุฏ ุชูุฏูู ุงุณุชูุงุฑุฉ ุฌุฏูุฏุฉ
- โ ุนูุฏ ุชุญุฏูุซ ุญุงูุฉ ุงููุฑุดุญ

---

## 2๏ธโฃ n8n Webhook (ุงุณุชูุจุงู ุงููุชุงุฆุฌ ูู n8n)

### ุงูููุน: **Incoming Webhook** (ุงุณุชูุจุงู)
### ุงูุญุงูุฉ: โ **ููุนู**

### Endpoint:
```
POST /webhook/n8n
```

### ุงูุฑุงุจุท ุงููุงูู (ุนูุฏ ุงููุดุฑ):
```
https://your-domain.com/webhook/n8n
```

### ุงููููุน ูู ุงูููุฏ:
- **ุงูููู**: `apps/backend/src/server.ts`
- **ุงูุณุทุฑ**: ุจุนุฏ Vapi webhook

### ุงููุธููุฉ:
- ุงุณุชูุจุงู ูุชุงุฆุฌ ุงูุชุญููู ูู n8n
- ุชุญุฏูุซ ุจูุงูุงุช ุงููุฑุดุญ ูู MongoDB:
  - `aiEvaluation`: ุชูููู AI
  - `status`: ุญุงูุฉ ุงููุฑุดุญ
  - `notes`: ููุงุญุธุงุช

### ูุชู ูุชู ุงุณุชุฎุฏุงูู:
- ุนูุฏ ุฅุฑุณุงู ูุชุงุฆุฌ ุงูุชุญููู ูู n8n workflow
- ุจุนุฏ ูุนุงูุฌุฉ ุงูุจูุงูุงุช ูู n8n

---

## 3๏ธโฃ Vapi Webhook (ุงุณุชูุจุงู ุงูุจูุงูุงุช ูู Vapi)

### ุงูููุน: **Incoming Webhook** (ุงุณุชูุจุงู)
### ุงูุญุงูุฉ: โ **ููุนู**

### Endpoint:
```
POST /webhook/vapi
```

### ุงูุฑุงุจุท ุงููุงูู (ุนูุฏ ุงููุดุฑ):
```
https://your-domain.com/webhook/vapi
```

### ุงููููุน ูู ุงูููุฏ:
- **ุงูููู**: `apps/backend/src/server.ts`
- **ุงูุณุทุฑ**: 89

### ุงููุธููุฉ:
- ุงุณุชูุจุงู ุฃุญุฏุงุซ ูู Vapi (ููุงููุงุช ุตูุชูุฉ)
- ูุนุงูุฌุฉ:
  - `status-update`: ุชุญุฏูุซุงุช ุญุงูุฉ ุงูููุงููุฉ
  - `transcript`: ูุตูุต ุงููุญุงุฏุซุฉ
  - `function-call`: ุงุณุชุฏุนุงุกุงุช ุงูุฏูุงู

### ูุชู ูุชู ุงุณุชุฎุฏุงูู:
- ุนูุฏ ุงุณุชูุจุงู ุฃุญุฏุงุซ ูู Vapi Voice Agent

---

## ๐ ููุฎุต:

| # | ุงูููุน | ุงูุงุชุฌุงู | ุงูุญุงูุฉ | ุงูุฑุงุจุท/Endpoint |
|---|-------|---------|--------|------------------|
| 1 | n8n (ุฅุฑุณุงู) | Outgoing | โ ููุนู | `https://n8ninstance.amtus.org/webhook/...` |
| 2 | n8n (ุงุณุชูุจุงู) | Incoming | โ ููุนู | `POST /webhook/n8n` |
| 3 | Vapi | Incoming | โ ููุนู | `POST /webhook/vapi` |

---

## ๐ ุชูุงุตูู ุฅุถุงููุฉ:

### n8n Webhook:
- **ุงูุบุฑุถ**: ุฅุฑุณุงู ุจูุงูุงุช ุงููุฑุดุญูู ููุชุญููู
- **ุงูุชูุฑุงุฑ**: ุนูุฏ ูู ุชูุฏูู ุงุณุชูุงุฑุฉ ุฃู ุชุญุฏูุซ ุญุงูุฉ
- **Non-blocking**: ูุง ูููุน ุญูุธ ุงูุจูุงูุงุช ุฅุฐุง ูุดู

### n8n Webhook (ุงุณุชูุจุงู):
- **ุงูุบุฑุถ**: ุงุณุชูุจุงู ูุชุงุฆุฌ ุงูุชุญููู ูู n8n
- **ุงูุชูุฑุงุฑ**: ุนูุฏ ุฅุฑุณุงู ูุชุงุฆุฌ ูู n8n workflow
- **ุงูุชุญุฏูุซ**: ูุญุฏุซ ุจูุงูุงุช ุงููุฑุดุญ ูู MongoDB ุชููุงุฆูุงู

### Vapi Webhook:
- **ุงูุบุฑุถ**: ุงุณุชูุจุงู ุฃุญุฏุงุซ ุงูููุงููุงุช ุงูุตูุชูุฉ
- **ุงูุชูุฑุงุฑ**: ุนูุฏ ูู ุญุฏุซ ูู Vapi
- **ุงูุงุณุชุฌุงุจุฉ**: ููุฑูุฉ (200 OK)

---

## ๐ ููุงุญุธุงุช:

1. **n8n Webhook** ููุฌูุฏ ูู `.env` ููููู ุชุบููุฑู
2. **Vapi Webhook** endpoint ุซุงุจุช ูู ุงูููุฏ
3. ููุง Webhook ููุนูุงู ููุนููุงู ุจุดูู ุตุญูุญ

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-12-14



























